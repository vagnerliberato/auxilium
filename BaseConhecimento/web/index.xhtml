<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.prime.com.tr/ui">

    <h:head>
        <title>Softland</title>

        <style type="text/css">  
            .ui-widget {  
                font-size: 12px !important;  
            }  
        </style> 

    </h:head>

    <h:body>
        <center>
            <h:form id="FormIndex">
                <h3>Base de Conhecimento</h3>

                <p:commandLink   actionListener="#{testeConexao.TestarConexaoComAgenda()}"
                                 value="Testar Conexão" 
                                 oncomplete="dlgConexao.show()" 
                                 title="Testar conexão com Agenda"
                                 update="conexao"/>

                |

                <p:commandLink   action="cadConhecimento.xhtml" 
                                 value="Novo Conhecimento" 
                                 ajax="false"
                                 title="Cadastrar um novo Conhecimento"/>  

                <p:dialog header="Conexão" 
                          widgetVar="dlgConexao" 
                          hideEffect="true" 
                          showEffect="true"
                          modal="true" 
                          height="50" 
                          width="500">  
                    <h:outputText id="conexao" value="#{testeConexao.conexao}" escape="false"/>  
                </p:dialog>

                <br/>
                <p:separator />
                <br/>

                <h:outputLabel value="Pesquisar por: "/>

                <p:autoComplete id="pesquisa" 
                                value="#{pesquisa.referencia}"
                                completeMethod="#{pesquisa.pesquisa}"/>

                <p:commandButton value="Confirma"
                                 actionListener="#{pesquisa.carregaDados}"
                                 update="conteudo"/>

                <br/>
                <br/>

                <p:panel visible="#{pesquisa.visivel}" id="conteudo">
                    
                    <p:dataTable var="dados" value="#{pesquisa.dados}" paginator="true" rows="10">  
                        <p:column headerText="#{dados.referencia}">
                            
                            <h:outputText value="#{dados.fato}" />

                            <br/>
                            <br/>

                            <b> <p:commandLink value="+ Detalhes" 
                                               oncomplete="Dialog.show()" 
                                               update="detalhes"/> </b>  
                        </p:column>  
                    </p:dataTable>  
                </p:panel>

                <p:dialog header="Conhecimento" 
                          widgetVar="Dialog" 
                          hideEffect="true" 
                          showEffect="true"
                          modal="true" 
                          height="500" 
                          width="500">  

                    <h:outputText id="detalhes" value="#{dados.fato}" escape="false"/>  
                </p:dialog>

                <p:messages id="msgs" showDetail="true"/>
            </h:form>
        </center>    
    </h:body>
</html>